/* ============================================================
   HOME.JS â€“ (Greeting, Quotes, Emoji Mood, Tasks, Chatbot)
   * Date, theme, and user: handled via utils.js
============================================================ */

document.addEventListener("DOMContentLoaded", () => {
  setGreeting();
  initQuotes();
  initMoodButtons();
  initTaskHandling();
  initChatbot();
});

/* ------------------------------------------------------------
   1) Greeting
------------------------------------------------------------ */
function setGreeting() {
  const el = document.getElementById("greeting");
  if (!el) return;

  const h = new Date().getHours();
  if (h >= 6 && h < 12) el.textContent = "ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±";
  else if (h >= 12 && h < 18) el.textContent = "Ù…Ø³Ø§Ø¡ Ø§Ù„Ù‡Ø¯ÙˆØ¡";
  else el.textContent = "Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±";
}

/* ------------------------------------------------------------
   2) Quotes
------------------------------------------------------------ */
function initQuotes() {
  const btn = document.getElementById("newQuoteBtn");
  const text = document.getElementById("quoteText");
  if (!btn || !text) return;

  const quotes = [
    "Ù„Ø§ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† ÙŠÙˆÙ…Ùƒ Ù…Ø«Ø§Ù„ÙŠÙ‹Ø§ Ø­ØªÙ‰ ÙŠÙƒÙˆÙ† Ù…ÙÙŠØ¯Ù‹Ø§.",
    "ÙƒÙ„ Ø®Ø·ÙˆØ© ØµØºÙŠØ±Ø© ØªØ¬Ø§Ù‡ Ù†ÙØ³Ùƒ Ù‡ÙŠ Ø¥Ù†Ø¬Ø§Ø² ÙŠÙØ­Ø³Ø¨ Ù„Ùƒ.",
    "Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¢Ù…Ù†Ø© ØªØ¨Ø¯Ø£ Ù…Ù† ÙƒÙ„Ù…Ø© ØªÙƒØªØ¨Ù‡Ø§ Ø¨ØµØ¯Ù‚.",
    "Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø¹Ù† Ù…Ø´Ø§Ø¹Ø±Ùƒ Ù‚ÙˆØ©ØŒ ÙˆÙ„ÙŠØ³ Ø¶Ø¹ÙÙ‹Ø§.",
    "Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ ÙŠÙƒÙÙŠ Ø£Ù† ØªÙ‚ÙˆÙ„ Ù„Ù†ÙØ³Ùƒ: Ø£Ù†Ø§ Ø£Ø­Ø§ÙˆÙ„ØŒ ÙˆÙ‡Ø°Ø§ ÙƒØ§ÙÙ.",
    "Ø§Ù‡Ø¯Ø£â€¦ Ù„ÙŠØ³ ÙƒÙ„ Ù…Ø§ ÙŠØ­Ø¯Ø« ÙŠØ³ØªØ­Ù‚ Ø£Ù† ÙŠØ£Ø®Ø° Ù…Ù† Ø·Ø§Ù‚ØªÙƒ.",
    "Ø§Ø³ØªØ±Ø­â€¦ Ø«Ù… Ø¹Ø¯ Ø£Ù‚ÙˆÙ‰.",
    "Ø­ØªÙ‰ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµØ¹Ø¨Ø© ØªÙØ±ÙŠÙƒ Ø£Ø¬Ø²Ø§Ø¡ Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† Ù‚ÙˆØªÙƒ.",
    "Ù„Ùˆ Ø¹Ù„Ù…Øª ÙƒÙ… ØµÙ…Ø¯ØªØŒ Ù„Ø±Ø¨Ù‘Øª Ø¹Ù„Ù‰ ÙƒØªÙÙƒ ÙƒÙ„ ØµØ¨Ø§Ø­.",
    "Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ù‡Ø§Ø¯Ø¦ Ù„Ø§ ÙŠØ²Ø§Ù„ ØªÙ‚Ø¯Ù…Ù‹Ø§.",
    "Ø£Ù†Øª ØªØ³ØªØ­Ù‚ Ø£ÙŠØ§Ù…Ù‹Ø§ Ù„Ø·ÙŠÙØ©â€¦ ÙˆØ­ÙŠØ§Ø© Ù…Ø·Ù…Ø¦Ù†Ø©.",
    "Ù„Ø§ Ø¨Ø£Ø³ Ù„Ùˆ Ù„Ù… ØªÙƒÙ† Ø¹Ù„Ù‰ Ù…Ø§ ÙŠØ±Ø§Ù… Ø§Ù„ÙŠÙˆÙ….",
    "Ø¨Ø¹Ø¶ Ø§Ù„Ø£ÙŠØ§Ù… Ø®ÙÙŠÙØ©â€¦ ÙˆØ¨Ø¹Ø¶Ù‡Ø§ Ø«Ù‚ÙŠÙ„Ø©ØŒ ÙˆÙƒÙ„Ø§Ù‡Ù…Ø§ ÙŠÙ…Ø¶ÙŠ.",
    "Ø§Ù…Ù†Ø­ Ù†ÙØ³Ùƒ Ù…Ø³Ø§Ø­Ø© Ù„Ù„ØªÙ†ÙØ³ Ù‚Ø¨Ù„ Ø£Ù† ØªÙÙƒÙ…Ù„.",
    "Ø§Ù„Ø±Ø§Ø­Ø© Ù„ÙŠØ³Øª ÙƒØ³Ù„Ù‹Ø§â€¦ Ø¥Ù†Ù‡Ø§ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ø¹Ù„Ø§Ø¬.",
    "Ù‚Ù„Ø¨Ùƒ ÙŠØ¹Ø±Ù Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø­ØªÙ‰ Ø­ÙŠÙ† ØªØªØ¹Ø¨ Ù‚Ø¯Ù…Ø§Ùƒ.",
    "ÙŠÙƒÙÙŠ Ø£Ù†Ùƒ Ø¨Ù‚ÙŠØª Ø±ØºÙ… ÙƒÙ„ Ù…Ø§ Ù…Ø±Ø±Øª Ø¨Ù‡.",
    "ØªÙ‚Ø¯ÙŠØ±Ùƒ Ù„Ù†ÙØ³Ùƒ Ø£Ù‡Ù… Ù…Ù† Ø±Ø¶Ø§ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†.",
    "Ù„Ù† ÙŠÙÙˆØªÙƒ Ù…Ø§ ÙƒÙØªØ¨ Ù„Ùƒâ€¦ ÙØ§Ø·Ù…Ø¦Ù†.",
    "Ø£Ù†Øª Ø£ÙƒØ¨Ø± Ù…Ù† ÙƒÙ„ Ø´Ø¹ÙˆØ± Ù…Ø¤Ù‚Øª.",
    "Ù„Ø§ ØªØ­ÙƒÙ… Ø¹Ù„Ù‰ ÙŠÙˆÙ…Ùƒ Ù…Ù† Ù„Ø­Ø¸Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙŠÙ‡.",
    "ÙƒÙ„ Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ù†Ùƒ ØªØ³ØªØ­Ù‚ Ø£Ù† ØªÙØ­ØªÙÙÙ‰.",
    "ØªØ°ÙƒÙ‘Ø± ÙƒÙ… ØªØºÙŠÙ‘Ø±Øª ÙˆÙƒÙ… Ù†Ø¶Ø¬Øª Ø¯ÙˆÙ† Ø£Ù† ØªØ´Ø¹Ø±.",
    "Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ Ø§Ù„Ø´Ø¬Ø§Ø¹Ø© ØªØ¹Ù†ÙŠ ÙÙ‚Ø· Ø£Ù† ØªÙ†Ù‡Ø¶ Ù…Ù† Ø§Ù„Ø³Ø±ÙŠØ±.",
    "Ù„Ø§ ØªÙ‚Ù„Ù„ Ù…Ù† Ù‚ÙŠÙ…Ø© ØµÙ…ÙˆØ¯Ùƒ.",
    "Ø®Ø° Ø§Ù„Ø£Ù…ÙˆØ± Ø¨Ø¨Ø·Ø¡â€¦ ÙØ§Ù„Ø¨Ø·Ø¡ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ø´ÙØ§Ø¡.",
    "Ù„ÙŠØ³ Ø¹Ù„ÙŠÙƒ Ø£Ù† ØªÙƒÙˆÙ† Ù‚ÙˆÙŠÙ‹Ø§ Ø·ÙˆØ§Ù„ Ø§Ù„ÙˆÙ‚Øª.",
    "Ù‡Ù†Ø§Ùƒ Ø£ÙŠØ§Ù… ØªÙØ¨Ù†Ù‰ ÙÙŠÙ‡Ø§â€¦ ÙˆØ£ÙŠØ§Ù… ØªØ³ØªØ±ÙŠØ­ ÙÙŠÙ‡Ø§.",
    "ÙˆØ¬ÙˆØ¯Ùƒ Ù…Ù‡Ù… Ø£ÙƒØ«Ø± Ù…Ù…Ø§ ØªØªØ®ÙŠÙ„.",
    "Ø§Ù„Ù…Ø´Ø§Ø¹Ø± ØªØ£ØªÙŠ ÙˆØªØ°Ù‡Ø¨â€¦ Ù„Ø§ Ø´ÙŠØ¡ ÙŠØ¨Ù‚Ù‰ Ù„Ù„Ø£Ø¨Ø¯.",
    "Ø£Ù†Øª ÙƒØ§ÙÙâ€¦ ØªÙ…Ø§Ù…Ù‹Ø§ ÙƒÙ…Ø§ Ø£Ù†Øª.",
    "Ù…Ø§ ØªØ´Ø¹Ø± Ø¨Ù‡ Ø­Ù‚ÙŠÙ‚ÙŠ ÙˆÙŠØ³ØªØ­Ù‚ Ø£Ù† ÙŠÙØ³Ù…Ø¹.",
    "Ø§Ù‡Ø¯Ø£â€¦ Ø§Ù„Ø£Ù…ÙˆØ± Ø³ØªØªÙ‘Ø¶Ø­ Ù…Ø¹ Ø§Ù„ÙˆÙ‚Øª.",
    "Ø§Ù„ØºÙŠÙ…Ø© Ù„Ø§ ØªØ¯ÙˆÙ…â€¦ ÙˆÙ„Ø§ Ø§Ù„Ø­Ø²Ù† Ø£ÙŠØ¶Ù‹Ø§.",
    "Ø£Ù†Øª ØªØªØ¹Ø§ÙÙ‰ Ø­ØªÙ‰ Ù„Ùˆ Ù„Ù… ØªÙ„Ø§Ø­Ø¸ Ø°Ù„Ùƒ.",
    "Ù„Ø§ ØªÙ†Ø³Ù Ø§Ù„Ø§Ø­ØªÙØ§Ù„ Ø¨Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ Ø§Ù„ØµØºÙŠØ±Ø©.",
    "ÙƒÙ„ Ø´Ø¹ÙˆØ± ØªÙ…Ø±Ù‘ Ø¨Ù‡ ÙŠØ®Ø¨Ø±Ùƒ Ø´ÙŠØ¦Ù‹Ø§ Ø¹Ù† Ù†ÙØ³Ùƒ.",
    "Ø£Ù†Øª ØªØ³ØªØ­Ù‚ Ø§Ù„Ø±Ø§Ø­Ø©â€¦ Ù„Ø§ ØªØ´Ø±Ø­ Ø°Ù„Ùƒ Ù„Ø£Ø­Ø¯.",
    "Ø®Ø° ÙØªØ±Ø§Øª ØµÙ…Øªâ€¦ ÙÙ‡ÙŠ ØªØ´Ø±Ø­ Ø§Ù„ÙƒØ«ÙŠØ±.",
    "Ù„Ø§ Ø¨Ø£Ø³ Ø¥Ù† Ø£Ø¹Ø¯Øª ØªØ±ØªÙŠØ¨ Ø­ÙŠØ§ØªÙƒ Ù…Ø±Ø§Øª Ø¹Ø¯ÙŠØ¯Ø©.",
    "Ø¹Ø§Ø¯ÙŠ Ø¬Ø¯Ù‹Ø§ Ø£Ù† ØªØ­ØªØ§Ø¬ ÙˆÙ‚ØªÙƒ Ø§Ù„Ø®Ø§Øµ.",
    "Ø£ØµØ¯Ù‚ Ù…Ø§ ÙÙŠÙƒ Ù…Ø´Ø§Ø¹Ø±Ùƒâ€¦ ÙÙ„Ø§ ØªÙƒØªÙ…Ù‡Ø§.",
    "Ø§Ù„ÙŠÙˆÙ… Ù„ÙŠØ³ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø·Ø±ÙŠÙ‚â€¦ Ù‡Ùˆ Ø®Ø·ÙˆØ© ÙÙŠÙ‡.",
    "Ù„ÙŠØ³ ÙƒÙ„ Ù‡Ø¯ÙˆØ¡ ÙØ±Ø§ØºÙ‹Ø§â€¦ Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ Ø³Ù„Ø§Ù….",
    "ØªÙØ§Ø¡Ù„ Ù‚Ù„ÙŠÙ„Ù‹Ø§â€¦ Ø³ØªÙ†Ø¯Ù‡Ø´ Ø¨Ù…Ø§ ÙŠØªØºÙŠÙ‘Ø±.",
    "Ø£Ù†Øª ØªØªÙ‚Ø¯Ù‘Ù… Ø­ØªÙ‰ Ù„Ùˆ ÙƒØ§Ù† Ø§Ù„ØªÙ‚Ø¯Ù… ØºÙŠØ± Ù…Ø±Ø¦ÙŠ.",
    "Ù…Ø§ Ø²Ù„Øª Ù‡Ù†Ø§â€¦ ÙˆÙ‡Ø°Ù‡ Ù‚ÙˆØ©.",
    "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø´ÙƒÙ„ Ù…Ù† Ø£Ø´ÙƒØ§Ù„ Ø§Ù„Ø¥ØµØ±Ø§Ø±.",
    "Ø¹Ù‚Ù„Ùƒ ÙŠØ­ØªØ§Ø¬ Ù„Ø·ÙÙ‹Ø§ Ø¨Ù‚Ø¯Ø± Ø­Ø§Ø¬ØªÙ‡ Ù„Ù„Ø¥Ù†Ø¬Ø§Ø².",
    "ÙƒÙ„ Ù…Ø§ ÙÙ‚Ø¯ØªÙ‡â€¦ Ø³ÙŠØ¹ÙˆÙ‘Ø¶Ùƒ Ø§Ù„Ù„Ù‡ Ø¨Ø®ÙŠØ±Ù Ø¹Ù†Ù‡.",
    "Ù…Ø¹ Ø§Ù„ÙˆÙ‚ØªØŒ Ø³ØªÙÙ‡Ù… Ù„Ù…Ø§Ø°Ø§ ØªØ£Ø®Ø±Øª Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø´ÙŠØ§Ø¡.",
    "Ø£Ù†Øª Ø£ÙƒØ¨Ø± Ù…Ù…Ø§ ÙŠØ±Ù‡ÙÙ‚Ùƒ.",
    "ØªÙ‚Ø¨Ù‘Ù„ Ù…Ø´Ø§Ø¹Ø±Ùƒâ€¦ ÙÙ‡ÙŠ Ø¬Ø²Ø¡ Ù…Ù†Ùƒ.",
    "Ø£Ø¨Ø·Ø¦â€¦ ÙØ§Ù„Ø¹Ø¬Ù„Ø© ØªÙØ±Ø¨Ùƒ Ø§Ù„Ù‚Ù„Ø¨.",
    "Ø§Ù…Ù†Ø­ ÙŠÙˆÙ…Ùƒ ÙØ±ØµØ© Ù„ÙŠÙƒÙˆÙ† Ø£Ø¬Ù…Ù„.",
    "Ù„Ø§ ØªØªØ±Ùƒ Ø£ÙÙƒØ§Ø± Ø§Ù„Ø£Ù…Ø³ ØªØ³Ø±Ù‚ Ø·Ù…Ø£Ù†ÙŠÙ†Ø© Ø§Ù„ÙŠÙˆÙ….",
    "Ø£Ù†Øª ØªØ³ØªØ­Ù‚ Ø¨Ø¯Ø§ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ø£ÙŠ Ù„Ø­Ø¸Ø©.",
    "Ù„Ù† ÙŠÙØ«Ù‚Ù„ Ù‚Ù„Ø¨Ùƒ Ù…Ø§ ÙƒÙØªØ¨ Ù„Ù‡ Ø£Ù† ÙŠØ±Ø­Ù„.",
    "Ø§Ø¨ØªØ³Ù…â€¦ Ø­ØªÙ‰ Ù„Ùˆ ÙƒØ§Ù†Øª Ø§Ø¨ØªØ³Ø§Ù…Ø© ØµØºÙŠØ±Ø©.",
    "ØºØ¯Ù‹Ø§ ÙŠÙˆÙ… Ø¢Ø®Ø±â€¦ ÙˆÙØ±ØµØ© Ø£Ø®Ø±Ù‰.",
    "Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ Ø§Ù„ØµÙ…Øª Ø£Ø¬Ù…Ù„ Ù…Ù† Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø´Ø±Ø­.",
    "Ù„Ø§ ØªØ¹Ø¨Ø« Ø¨Ø³Ù„Ø§Ù…Ùƒ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ù„Ø£Ø¬Ù„ Ø£Ø­Ø¯.",
    "ØªØ¹Ù„Ù‘Ù… Ø£Ù† ØªØ®ØªØ§Ø± Ù…Ø§ ÙŠØ´Ø¨Ù‡Ùƒ.",
    "ÙƒÙ„ Ù…Ø§ ØªØ­ØªØ§Ø¬Ù‡ Ø§Ù„Ø¢Ù†: Ù†ÙØ³ Ø¹Ù…ÙŠÙ‚ ÙˆÙ‡Ø¯ÙˆØ¡.",
    "Ø§Ù…Ù†Ø­ Ù‚Ù„Ø¨Ùƒ Ø¥Ø°Ù†Ù‹Ø§ Ø¨Ø§Ù„Ø§Ø³ØªØ±Ø§Ø­Ø©.",
    "Ø§Ù„ÙˆÙ‚Øª Ù„ÙŠØ³ Ù…ØªØ£Ø®Ø±Ù‹Ø§ Ù„ØªØ¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯.",
    "Ù…Ø§ Ø²Ù„Øª ØªØªØ¹Ù„Ù‘Ù…â€¦ ÙˆÙ‡Ø°Ø§ Ø·Ø¨ÙŠØ¹ÙŠ.",
    "Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© ØªØµÙ†Ø¹ ÙØ±Ù‚Ù‹Ø§ ÙƒØ¨ÙŠØ±Ù‹Ø§.",
    "Ù„Ø§ ØªØ·Ù„Ø¨ Ù…Ù† Ù†ÙØ³Ùƒ Ø£ÙƒØ«Ø± Ù…Ù…Ø§ ØªØ³ØªØ·ÙŠØ¹.",
    "Ø§Ø­ØªÙˆÙ Ù†ÙØ³Ùƒ Ù‚Ø¨Ù„ Ø£Ù† ØªØ·Ù„Ø¨ Ù…Ù† Ø£Ø­Ø¯ Ø£Ù† ÙŠØ­ØªÙˆÙŠÙƒ.",
    "ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ ÙŠÙˆÙ…Ùƒ Ø¨Ù„Ø·Ùâ€¦ ÙÙ‡Ùˆ Ø¬Ø²Ø¡ Ù…Ù†Ùƒ.",
    "Ø§Ù‡Ø¯Ø£â€¦ ÙƒÙ„ Ø´ÙŠØ¡ ÙŠÙ…Ø±.",
    "Ø¹Ø§Ø¯ÙŠ Ø£Ù† ØªØªØ±Ø§Ø¬Ø¹ Ø®Ø·ÙˆØ©â€¦ Ø§Ù„Ù…Ù‡Ù… Ø£Ù† Ù„Ø§ ØªÙŠØ£Ø³.",
    "Ø£ØºÙ„Ø¨ Ø§Ù„Ø£Ù…ÙˆØ± Ø£Ù‚Ù„ Ø³ÙˆØ¡Ù‹Ø§ Ù…Ù…Ø§ Ù†ØªØµÙˆÙ‘Ø±.",
    "Ø£Ù†Øª ØªØ³ØªØ­Ù‚ Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© Ø¯ÙˆÙ† Ø´Ø±ÙˆØ·.",
    "Ø§ØªØ±Ùƒ Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ø£Ø´ÙŠØ§Ø¡ Ø§Ù„Ø¬Ù…ÙŠÙ„Ø© ÙƒÙŠ ØªØ¯Ø®Ù„ Ø­ÙŠØ§ØªÙƒ.",
    "ÙƒÙ† Ø±ÙÙŠÙ‚Ù‹Ø§ Ø¨Ù†ÙØ³Ùƒâ€¦ ÙÙ‡ÙŠ Ø±ÙÙŠÙ‚ØªÙƒ Ø§Ù„Ø¯Ø§Ø¦Ù…Ø©.",
    "Ø§Ù„ØµØ¨Ø± Ù„ÙŠØ³ Ø¶Ø¹ÙÙ‹Ø§â€¦ Ø¨Ù„ ÙÙ‡Ù… Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø­ÙŠØ§Ø©.",
    "Ù…Ù‡Ù…Ø§ ÙƒØ§Ù† Ø´Ø¹ÙˆØ±Ùƒ Ø§Ù„Ø¢Ù†â€¦ Ø³ÙŠØªØºÙŠÙ‘Ø±.",
    "Ù…Ø±ÙˆÙ†Ø© Ù‚Ù„Ø¨Ùƒ Ø´ÙŠØ¡ ÙŠØ³ØªØ­Ù‚ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨.",
    "ÙƒÙ„ ÙŠÙˆÙ… ÙŠÙ…Ù†Ø­Ùƒ Ù†Ø³Ø®Ø© Ù…Ø®ØªÙ„ÙØ© Ù…Ù†Ùƒ.",
    "Ø§Ù„ØºØ¯ ÙŠØ­Ù…Ù„ Ø¯Ø§Ø¦Ù…Ù‹Ø§ ÙØ±ØµØ© Ø¬Ø¯ÙŠØ¯Ø©.",
    "Ø§Ù‚Ø¨Ù„ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø®ÙÙŠÙØ©â€¦ ÙˆØ§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø«Ù‚ÙŠÙ„Ø© Ø£ÙŠØ¶Ù‹Ø§.",
    "Ø¥Ù† ØªØ¹Ø¨Øªâ€¦ Ø§Ø®ØªØ¨Ø¦ Ù‚Ù„ÙŠÙ„Ø§Ù‹ ÙÙŠ Ù‡Ø¯ÙˆØ¦Ùƒ.",
    "Ø§Ù„ØªÙ‚Ø¯Ù… Ù„Ø§ ÙŠØ¹Ù†ÙŠ Ø£Ù„Ø§ ØªØªØ£Ù„Ù….",
    "ÙƒÙØ§Ùƒ Ø¬Ù„Ø¯Ù‹Ø§ Ù„Ù†ÙØ³Ùƒâ€¦ Ø£Ù†Øª ØªÙØ¹Ù„ Ù…Ø§ Ø¨ÙˆØ³Ø¹Ùƒ.",
    "Ø§Ù„ÙŠÙˆÙ… Ù„Ù† ÙŠØªÙƒØ±Ø±â€¦ Ø§Ø¬Ø¹Ù„Ù‡ Ù„Ø·ÙŠÙÙ‹Ø§.",
    "Ø§Ø®ØªØ± Ù…Ø§ ÙŠÙ†Ø§Ø³Ø¨Ùƒâ€¦ Ø­ØªÙ‰ Ù„Ùˆ Ø§Ø³ØªØºØ±Ø¨Ù‡ Ø§Ù„Ø¬Ù…ÙŠØ¹.",
    "Ø£Ù†Øª ØªÙ†Ù…Ùˆ Ø¨ØµÙ…Øªâ€¦ ÙˆÙ‡Ø°Ø§ Ø¬Ù…ÙŠÙ„.",
    "Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ Ù„Ø§ ØªØ­ØªØ§Ø¬ Ø­Ù„Ù‹Ø§â€¦ ÙÙ‚Ø· Ø§Ø­ØªØ¶Ø§Ù†Ù‹Ø§.",
    "Ù„Ø§ ØªØ­Ù…Ù‘Ù„ Ù‚Ù„Ø¨Ùƒ Ø£ÙƒØ«Ø± Ù…Ù…Ø§ ÙŠØ­ØªÙ…Ù„.",
    "ÙŠÙƒÙÙŠ Ø£Ù† ØªØ¨Ù‚Ù‰â€¦ Ù‡Ø°Ù‡ Ø´Ø¬Ø§Ø¹Ø©.",
    "Ù„Ø§ ØªØ¶ØºØ· Ø¹Ù„Ù‰ Ù†ÙØ³Ùƒ Ù„ØªÙƒÙˆÙ† Ø§Ù„Ø£ÙØ¶Ù„â€¦ ÙƒÙ† Ø£Ù†Øª ÙÙ‚Ø·.",
    "ÙƒÙ„ ÙŠÙˆÙ… ÙŠØ¶ÙŠÙ Ù„Ùƒ Ø´ÙŠØ¦Ù‹Ø§â€¦ Ø­ØªÙ‰ Ù„Ùˆ Ù„Ù… ØªÙ„Ø§Ø­Ø¸.",
    "Ø£Ù†Øª Ù„Ø³Øª ÙˆØ­Ø¯Ùƒâ€¦ Ø­ØªÙ‰ Ù„Ùˆ Ø´Ø¹Ø±Øª Ø¨Ø°Ù„Ùƒ.",
    "Ø§Ù„ØªØºÙŠÙŠØ± ÙŠØ¨Ø¯Ø£ Ù…Ù† ÙÙƒØ±Ø© Ù‡Ø§Ø¯Ø¦Ø©.",
    "Ø§Ù‡ØªÙ… Ø¨Ù‚Ù„Ø¨Ùƒ ÙƒÙ…Ø§ ØªÙ‡ØªÙ… Ø¨Ø¬Ø³Ø¯Ùƒ.",
    "ÙƒÙ„ Ø´ÙŠØ¡ Ø³ÙŠØ£ØªÙŠ Ø­ÙŠÙ† ÙŠÙƒÙˆÙ† Ø§Ù„ÙˆÙ‚Øª Ù…Ù†Ø§Ø³Ø¨Ù‹Ø§.",
    "Ø£Ù†Øª ØªØ³ØªØ­Ù‚ ÙƒÙ„ Ø§Ù„Ø·Ù…Ø£Ù†ÙŠÙ†Ø©."
  ];

  let lastQuote = null;

  function getRandomQuote() {
    let q = quotes[Math.floor(Math.random() * quotes.length)];
    if (q === lastQuote) {
      q = quotes[Math.floor(Math.random() * quotes.length)];
    }
    lastQuote = q;
    return q;
  }

// Initial loading
  text.textContent = `"${getRandomQuote()}"`;

// On click
  btn.addEventListener("click", () => {
    text.textContent = `"${getRandomQuote()}"`;
  });
}

/* ------------------------------------------------------------
   3) Emoji Buttons (Mood Buttons) â€“ Save + Bounce Animation + Message
------------------------------------------------------------ */
function initMoodButtons() {
  const moodButtons = document.querySelectorAll(".mood-buttons .mood");
  const hintEl = document.querySelector(".mood-hint");

  if (!moodButtons.length || !hintEl) return;

  const key = window.getStorageKey();
  const iso = window.getTodayISO();
  const db = JSON.parse(localStorage.getItem(key) || "{}");

//  Retrieve Saved Mood
  const savedMood = db[iso]?.emojiMood || null;

  function applyStyle(btn) {
    // Remove all states
    moodButtons.forEach(b => {
      b.classList.remove("is-selected", "is-dimmed", "mood-bounce-click");
    });

    // Add state to the selected button
    btn.classList.add("is-selected", "mood-bounce-click");

    // Dim the rest
    moodButtons.forEach(b => {
      if (b !== btn) b.classList.add("is-dimmed");
    });

    // Remove bounce animation class after it finishes
    setTimeout(() => {
      btn.classList.remove("mood-bounce-click");
    }, 350);
  }

  function updateHint(moodName) {
    hintEl.textContent = `Ø³Ø¬Ù„Ù†Ø§ Ø´Ø¹ÙˆØ±Ùƒ Ø§Ù„Ø¢Ù† ÙƒÙ€: ${moodName} ğŸ’› ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ±Ù‡ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª.`;
  }

  function saveEmojiMood(moodName) {
    const localDb = JSON.parse(localStorage.getItem(key) || "{}");
    if (!localDb[iso]) localDb[iso] = {};
    localDb[iso].emojiMood = moodName;
    localStorage.setItem(key, JSON.stringify(localDb));
  }

  // When any emoji is clicked
  moodButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      const mood = btn.dataset.mood || "";
      applyStyle(btn);
      if (mood) {
        updateHint(mood);
        saveEmojiMood(mood);
      }
    });
  });

// On page load: apply the previously saved mood if available
  if (savedMood) {
    const match = Array.from(moodButtons).find(b => b.dataset.mood === savedMood);
    if (match) {
      applyStyle(match);
      updateHint(savedMood);
    }
  }
}

/* ------------------------------------------------------------
   4) Task Management + "Empty Task" Modal
   (Actual saving is handled in chicklist.js)
------------------------------------------------------------ */
function initTaskHandling() {
  const saveTaskBtn  = document.getElementById("saveTaskBtn");
  const taskInput    = document.getElementById("taskDescription");
  const emptyModal   = document.getElementById("emptyTaskModal");
  const closeModalBtn = document.getElementById("closeEmptyTaskModal");

  if (closeModalBtn && emptyModal) {
    closeModalBtn.addEventListener("click", () => {
      emptyModal.hidden = true;
    });
  }

  if (saveTaskBtn && taskInput) {
    saveTaskBtn.addEventListener("click", (e) => {
      const text = taskInput.value.trim();
      if (!text) {
        e.preventDefault();
        if (emptyModal) emptyModal.hidden = false;
        // Return here, letting chicklist.js handle other task-related actions
        return;
      }
    });
  }
}

/* ------------------------------------------------------------
  5) Simple Chatbot
------------------------------------------------------------ */
function initChatbot() {
  const chatbotBtn   = document.getElementById("chatbotBtn");
  const chatWindow   = document.getElementById("chatWindow");
  const closeChatBtn = document.getElementById("closeChat");
  const messagesEl   = document.getElementById("chatMessages");
  const inputEl      = document.getElementById("userMsgInput");
  const sendBtn      = document.getElementById("sendMsgBtn");

// If the page doesn't have a chatbot, do not proceed
  if (!chatbotBtn || !chatWindow || !messagesEl || !inputEl || !sendBtn) return;

  function openChat() {
    chatWindow.classList.add("is-open");
    setTimeout(() => inputEl.focus(), 80);
  }

  function closeChat() {
    chatWindow.classList.remove("is-open");
  }

  chatbotBtn.addEventListener("click", openChat);
  if (closeChatBtn) closeChatBtn.addEventListener("click", closeChat);

  function appendMessage(text, sender = "user") {
    const msg = document.createElement("div");
    msg.classList.add("message");
    if (sender === "bot") msg.classList.add("bot-msg");
    else msg.classList.add("user-msg");

    msg.textContent = text;
    messagesEl.appendChild(msg);
    messagesEl.scrollTop = messagesEl.scrollHeight;
  }

  /* ============================================================
   SMART CHATBOT LOGIC 
   ============================================================ */

// Variable to store the last sent reply (declared outside the function to prevent resetting)
let lastBotReply = "";

function getBotReply(userText) {
  const text = userText.trim().toLowerCase();

  if (!text) return "Ø£Ø­ØªØ§Ø¬ Ø£Ù† Ø£Ø³Ù…Ø¹ Ù…Ù†Ùƒ Ø¬Ù…Ù„Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ ğŸ¤";

// --- Database ---
  const knowledgeBase = [
    {
      category: "greeting",
      keywords: ["Ù‡Ù„Ø§", "Ù…Ø±Ø­Ø¨Ø§", "Ø³Ù„Ø§Ù…", "Ø§Ù‡Ù„ÙŠÙ†", "ØµØ¨Ø§Ø­", "Ù…Ø³Ø§Ø¡", "Ù‡Ø§Ù‰", "Ù‡Ø§ÙŠ", "Ø§Ù„Ø³Ù„Ø§Ù…"],
      replies: [
        "ÙŠØ§ Ù‡Ù„Ø§ Ø¨Ùƒ ğŸ¤.. ÙƒÙŠÙ Ø­Ø§Ù„ Ù‚Ù„Ø¨Ùƒ Ø§Ù„ÙŠÙˆÙ…ØŸ",
        "Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ø£Ø³Ù…Ø¹ÙƒØŒ ÙƒÙ„ÙŠ Ø¢Ø°Ø§Ù† ØµØ§ØºÙŠØ© ğŸŒ¿",
        "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ø³Ø§Ø­ØªÙƒ Ø§Ù„Ø¢Ù…Ù†Ø©. ÙƒÙŠÙ ÙƒØ§Ù† ÙŠÙˆÙ…ÙƒØŸ"
      ]
    },
    {
      category: "sad",
      keywords: ["Ø­Ø²ÙŠÙ†", "Ø²Ø¹Ù„Ø§Ù†", "Ø¶Ø§ÙŠÙ‚", "Ù…Ù‡Ù…ÙˆÙ…", "Ø¨ÙƒÙŠ", "Ø¯Ù…ÙˆØ¹", "Ù…ÙƒØªØ¦Ø¨", "Ø®Ù†Ù‚Ù‡", "Ø·ÙØ´", "Ø³ÙŠØ¡"],
      replies: [
        "ÙŠØ¤Ø³ÙÙ†ÙŠ Ø£Ù† Ø´Ø¹ÙˆØ±Ùƒ Ø«Ù‚ÙŠÙ„ Ø§Ù„Ø¢Ù† ğŸ’”.. Ø¬Ø±Ø¨ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø£ÙƒØ«Ø± Ø¹Ù† Ø§Ù„Ø³Ø¨Ø¨ØŒ Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ Ø§Ù„ÙƒÙ„Ø§Ù… ÙŠØ®ÙÙ‘Ù Ø§Ù„Ø­Ù…Ù„.",
        "Ø³Ù„Ø§Ù…Ø© Ù‚Ù„Ø¨Ùƒ.. Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„ØµØ¹Ø¨Ø© Ù…Ø«Ù„ Ø§Ù„ØºÙŠÙ…Ø©ØŒ Ø¨ØªÙ…Ø± ÙˆØªØ´Ø±Ù‚ Ø§Ù„Ø´Ù…Ø³ Ø¨Ø¹Ø¯Ù‡Ø§. ğŸŒ¦ï¸",
        "Ù„Ø§ Ø¨Ø£Ø³ Ø¨Ø§Ù„Ø­Ø²Ù† Ù‚Ù„ÙŠÙ„Ø§Ù‹ØŒ Ø§Ù„Ø¯Ù…ÙˆØ¹ ØªÙ†Ø¸Ù Ø§Ù„Ø±ÙˆØ­. Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù…Ø¹Ùƒ.",
        "Ø£Ø´Ø¹Ø± Ø¨Ùƒ.. Ø®Ø° ÙˆÙ‚ØªÙƒ ÙÙŠ Ø§Ø³ØªÙŠØ¹Ø§Ø¨ Ø§Ù„Ø´Ø¹ÙˆØ±ØŒ ÙˆÙ„Ø§ ØªØ¶ØºØ· Ø¹Ù„Ù‰ Ù†ÙØ³Ùƒ Ù„ØªÙƒÙˆÙ† Ø¨Ø®ÙŠØ± ÙÙˆØ±Ø§Ù‹."
      ]
    },
    {
      category: "anxious",
      keywords: ["Ù‚Ù„Ù‚", "Ø®Ø§ÙŠÙ", "Ù…ØªÙˆØªØ±", "Ø±Ø¹Ø¨", "Ø®ÙˆÙ", "Ø£ÙÙƒØ§Ø±", "ÙˆØ³ÙˆØ§Ø³", "Ø¶ØºØ·", "ØªÙÙƒÙŠØ±"],
      replies: [
        "Ø§Ù„Ù‚Ù„Ù‚ Ù…Ø±Ù‡Ù‚ Ø¬Ø¯Ø§Ù‹.. ØªØ°ÙƒØ± Ø£Ù† Ø£ÙÙƒØ§Ø±Ùƒ Ù„ÙŠØ³Øª Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø­Ù‚Ø§Ø¦Ù‚. ğŸŒ§ï¸ğŸ¤",
        "Ø®Ø° Ù†ÙØ³ Ø¹Ù…ÙŠÙ‚.. Ø´Ù‡ÙŠÙŠÙ‚.. Ø²ÙÙŠÙŠØ±.. ğŸ§˜â€â™‚ï¸ Ø£Ù†Øª Ù‡Ù†Ø§ ÙˆØ§Ù„Ø¢Ù†ØŒ ÙˆØ£Ù†Øª Ø¨Ø£Ù…Ø§Ù†.",
        "Ø­Ø§ÙˆÙ„ ÙƒØªØ§Ø¨Ø© ÙƒÙ„ Ù…Ø§ ÙŠØ®ÙŠÙÙƒ ÙÙŠ ÙˆØ±Ù‚Ø©ØŒ Ù„Ø¥Ø®Ø±Ø§Ø¬Ù‡ Ù…Ù† Ø¹Ù‚Ù„Ùƒ ÙˆØ±Ø¤ÙŠØªÙ‡ Ø¨ÙˆØ¶ÙˆØ­.",
        "Ø£Ù†Ø§ Ø¨Ø¬Ø§Ù†Ø¨Ùƒ.. Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø´ÙŠØ¡ ÙˆØ§Ø­Ø¯ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠÙ‡ Ø§Ù„Ø¢Ù†ØŒ ÙˆØ§ØªØ±Ùƒ Ø§Ù„Ø¨Ø§Ù‚ÙŠ."
      ]
    },
    {
      category: "happy",
      keywords: ["Ø³Ø¹ÙŠØ¯", "Ù…Ø¨Ø³ÙˆØ·", "ÙØ±Ø­", "Ø·Ø§ÙŠØ±", "Ø¥Ù†Ø¬Ø§Ø²", "Ù†Ø¬Ø­Øª", "Ø§Ù„Ø­Ù…Ø¯Ù„Ù„Ù‡", "Ø±Ø§Ø¦Ø¹", "Ø¬Ù…ÙŠÙ„", "Ù…Ù…ØªØ§Ø²"],
      replies: [
        "ÙŠØ§ Ø¬Ù…Ø§Ù„ Ù‡Ø§Ù„Ø·Ø§Ù‚Ø©! ğŸŒ¿âœ¨ Ø§Ù„Ù„Ù‡ ÙŠØ¯ÙŠÙ… Ø¹Ù„ÙŠÙƒ Ø§Ù„ÙØ±Ø­Ø©.",
        "Ø´ÙŠØ¡ ÙŠØ³Ø¹Ø¯Ù†ÙŠ Ø¬Ø¯Ø§Ù‹! ğŸ˜ Ø´Ø§Ø±ÙƒÙ†ÙŠØŒ Ù…Ø§ Ø§Ù„Ø³Ø± ÙˆØ±Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ø´Ø¹ÙˆØ± Ø§Ù„Ø­Ù„ÙˆØŸ",
        "Ø§Ù„Ù„Ø­Ø¸Ø§Øª Ø§Ù„Ø­Ù„ÙˆØ© ØªØ³ØªØ­Ù‚ Ø§Ù„ØªÙˆØ«ÙŠÙ‚.. Ù„Ø§ ØªÙ†Ø³Ù ÙƒØªØ§Ø¨ØªÙ‡Ø§ ÙÙŠ ÙŠÙˆÙ…ÙŠØ§ØªÙƒ!",
        "Ø§Ù„Ø­Ù…Ø¯Ù„Ù„Ù‡ ğŸ¤.. Ø§Ø³ØªÙ…ØªØ¹ Ø¨ÙƒÙ„ ØªÙØ§ØµÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø´Ø¹ÙˆØ±."
      ]
    },
    {
      category: "tired",
      keywords: ["ØªØ¹Ø¨Ø§Ù†", "Ù…Ø±Ù‡Ù‚", "Ù…ØªØ¹Ø¨", "Ù…Ø§Ù†Ù…Øª", "Ù…Ù‡Ø¯ÙˆØ¯", "ÙƒØ³Ù„", "Ø®Ù…ÙˆÙ„", "Ù†ÙˆÙ…"],
      replies: [
        "ÙŠØ¨Ø¯Ùˆ Ø£Ù†Ùƒ Ø¨Ø°Ù„Øª Ù…Ø¬Ù‡ÙˆØ¯Ø§Ù‹ ÙƒØ¨ÙŠØ±Ø§Ù‹ ğŸ˜”.. Ø§Ù„Ø¬Ø³Ù… ÙŠØ·Ù„Ø¨ Ø­Ù‚Ù‡ ÙÙŠ Ø§Ù„Ø±Ø§Ø­Ø©.",
        "Ø¥Ø°Ø§ Ø£Ù…ÙƒÙ†ØŒ Ø£Ø®Ø° ØºÙÙˆØ© Ø¨Ø³ÙŠØ·Ø© Ø£Ùˆ Ø§Ù„Ø§Ø³ØªÙ„Ù‚Ø§Ø¡ ÙˆØ¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¹ÙŠÙ†ÙŠÙ† Ù„Ù€ 5 Ø¯Ù‚Ø§Ø¦Ù‚ Ù‚Ø¯ ÙŠÙÙŠØ¯. ğŸ›Œ",
        "Ø§Ù„Ø±Ø§Ø­Ø© Ù„ÙŠØ³Øª ÙƒØ³Ù„Ø§Ù‹ØŒ Ø§Ù„Ø±Ø§Ø­Ø© Ø´Ø­Ù† Ù„Ù„Ø·Ø§Ù‚Ø©. ÙƒÙ† Ù„Ø·ÙŠÙØ§Ù‹ Ù…Ø¹ Ù†ÙØ³Ùƒ Ø§Ù„ÙŠÙˆÙ….",
        "Ù„Ø§ ØªÙ†Ø³Ù Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡ ğŸ’§.. Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ Ø§Ù„Ø¬ÙØ§Ù ÙŠØ³Ø¨Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø®Ù…ÙˆÙ„."
      ]
    },
    {
      category: "angry",
      keywords: ["Ù…Ø¹ØµØ¨", "ØºØ§Ø¶Ø¨", "Ù…Ù†Ø±ÙØ²", "Ù‚Ù‡Ø±", "Ø­Ø§Ù‚Ø¯", "ÙƒØ±Ù‡", "Ø¹ØµØ¨ÙŠØ©", "Ù…ØªÙ†Ø±ÙØ²"],
      replies: [
        "Ù…Ù† Ø­Ù‚Ùƒ Ø§Ù„Ø´Ø¹ÙˆØ± Ø¨Ø§Ù„ØºØ¶Ø¨ØŒ ÙƒØªÙ… Ø§Ù„ØºØ¶Ø¨ Ù„ÙŠØ³ Ø­Ù„Ø§Ù‹. ğŸ”¥ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø¹Ù† Ø§Ù„Ø£Ù…Ø± Ù‡Ù†Ø§ Ù‚Ø¯ ØªØ±ÙŠØ­Ùƒ.",
        "ØªÙ†ÙØ³.. Ø§Ù„ØºØ¶Ø¨ Ø·Ø§Ù‚Ø© Ù‚ÙˆÙŠØ©ØŒ Ø­Ø§ÙˆÙ„ ØªÙØ±ÙŠØºÙ‡Ø§ Ø¨Ù…Ø´ÙŠ Ø³Ø±ÙŠØ¹ Ø£Ùˆ ÙƒØªØ§Ø¨Ø© Ø­Ø±Ø©.",
        "Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ Ø§Ù„Ù…ÙˆØ§Ù‚Ù ØªÙƒÙˆÙ† Ù…Ø³ØªÙØ²Ø© Ø¬Ø¯Ø§Ù‹.. Ù‡Ø¯Ø¦ Ù…Ù† Ø±ÙˆØ¹ÙƒØŒ ØµØ­ØªÙƒ Ø£Ù‡Ù… Ù…Ù† Ø£ÙŠ Ø´ÙŠØ¡."
      ]
    },
    {
      category: "love",
      keywords: ["Ø­Ø¨", "Ø§Ø­Ø¨", "Ù…Ù…ØªÙ†", "Ø´ÙƒØ±Ø§", "ØµØ¯ÙŠÙ‚", "Ø§Ù‡Ù„", "Ù†Ø§Ø³"],
      replies: [
        "Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ø­Ø¨ ÙˆØ§Ù„Ø§Ù…ØªÙ†Ø§Ù† ØªØ´ÙÙŠ Ø§Ù„Ø±ÙˆØ­ ğŸŒ¸.. Ø§Ù„Ù„Ù‡ ÙŠÙƒØ«Ø± Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ù„Ø­Ø¸Ø§Øª.",
        "ÙŠØ§ Ø¨Ø®ØªÙ‡Ù… ÙÙŠÙƒ ğŸ¤.. Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø¹Ù† Ø§Ù„Ø­Ø¨ ÙŠÙ‚ÙˆÙŠ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·ØŒ Ø£Ø®Ø¨Ø±Ù‡Ù… Ø¨Ø´Ø¹ÙˆØ±Ùƒ.",
        "Ù…Ù…ØªÙ† Ù„ÙˆØ¬ÙˆØ¯Ùƒ ÙˆÙ…Ø´Ø§Ø±ÙƒØªÙƒ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ù„Ø·ÙŠÙØ©."
      ]
    }
  ];

// --- Function to Select a Non-Repeating Reply ---
  function getUniqueReply(repliesArray) {
// Filter the array to exclude the previous reply
    const availableReplies = repliesArray.filter(r => r !== lastBotReply);
    
// If only one or no reply remains (rare case), select from all replies
    const listToChooseFrom = availableReplies.length > 0 ? availableReplies : repliesArray;
    
// Random Selection
    const randomIndex = Math.floor(Math.random() * listToChooseFrom.length);
    const selectedReply = listToChooseFrom[randomIndex];
    
// Update Last Reply
    lastBotReply = selectedReply;
    return selectedReply;
  }

// --- Search for Match ---
  for (const item of knowledgeBase) {
    const isMatch = item.keywords.some(keyword => text.includes(keyword));
    if (isMatch) {
      return getUniqueReply(item.replies); 
    }
  }

// --- Default Reply ---
  const defaultReplies = [
    "Ø£Ø³Ù…Ø¹Ùƒ ğŸ¤.. Ø­Ø§ÙˆÙ„ Ø£Ù† ØªÙƒØªØ¨ Ù„ÙŠ Ø£ÙƒØ«Ø± Ø¹Ù…Ø§ Ø­Ø¯Ø« Ù…Ø¹Ùƒ Ø§Ù„ÙŠÙˆÙ….",
    "ÙƒÙ„Ø§Ù…Ùƒ ÙˆØµÙ„Ù†ÙŠ.. Ø§Ø³ØªÙ…Ø± Ø¨Ø§Ù„ÙƒØªØ§Ø¨Ø©ØŒ Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ø£Ø¬Ù„Ùƒ.",
    "Ù…Ù…ÙƒÙ† ØªÙˆØ¶Ø­ Ù„ÙŠ Ø£ÙƒØ«Ø±ØŸ ÙƒÙŠÙ Ø£Ø«Ø± Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ù Ø¹Ù„ÙŠÙƒØŸ",
    "Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ Ù…Ø¬Ø±Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø©ØŒ Ø­ØªÙ‰ Ù„Ùˆ ÙƒØ§Ù† Ø§Ù„ÙƒÙ„Ø§Ù… ØºÙŠØ± Ù…Ø±ØªØ¨ØŒ ÙŠØ±ÙŠØ­ Ø§Ù„Ù‚Ù„Ø¨ âœ’ï¸."
  ];
  return getUniqueReply(defaultReplies); 
}

  function handleSend() {
    const text = inputEl.value.trim();
    if (!text) return;

    appendMessage(text, "user");
    inputEl.value = "";

    setTimeout(() => {
      const reply = getBotReply(text);
      appendMessage(reply, "bot");
    }, 400);
  }

  sendBtn.addEventListener("click", handleSend);

  inputEl.addEventListener("keydown", (e) => {
    if (e.key === "Enter" && !e.shiftKey) {
      e.preventDefault();
      handleSend();
    }
  });
}